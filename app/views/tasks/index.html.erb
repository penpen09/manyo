<p id="notice"><%= notice %></p>

<h1>Tasks</h1>

<%= form_with(url: tasks_path, method: :get, local: true) do |f| %>
  <%= f.label :title %>
  <%= f.text_field :title ,placeholder: "検索", value: params[:title] %>
  <%= f.label :status %>
  <%= f.select :status, ["未着手","着手","完了"], { include_blank: "select"} %>
  <%= f.label :priority %>
  <%= f.select :priority, ["高","中","低"], { include_blank: "select"} %>
  <%= f.hidden_field :search, value:"true" %>
  <%= f.submit "Search" %>
<% end %>


<br>
<%= link_to t('view.tasks.index.New Task'), new_task_path %>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Content</th>
      <th><%= link_to "終了期限", tasks_path(sort_expired: "true") %></th>
      <th>created_at</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td class="task_row"><%= task.title %></td>
        <td class="task_row"><%= task.content %></td>
        <td class="task_row"><%= task.limit_date.strftime('%Y/%m/%d') %></td>
        <td class="task_row"><%= task.status %></td>
        <td class="task_row"><%= task.priority %></td>
        <td class="task_row"><%= task.created_at.strftime('%Y/%m/%d') %></td>
        <td class="task_row"><%= link_to t('view.tasks.index.Show'), task %></td>
        <td class="task_row"><%= link_to t('view.tasks.index.Edit'), edit_task_path(task) %></td>
        <td class="task_row"><%= link_to t('view.tasks.index.Destroy'), task, method: :delete, data: { confirm: t('view.tasks.index.Are you sure?') } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
